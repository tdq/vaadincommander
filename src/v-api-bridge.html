<script>
    class VAPIBridge {

        constructor(commander/*, dependencies*/) {
            this._commander = commander;
            //this.dependencies = dependencies;
        }

        getBufferWidth() {
            return this._commander.width;
        }

        getBufferHeight() {
            return this._commander.height;
        }

        readBufferAt(x, y) {
            return this._commander.getBuffer(x, y);

            //return {value: cell.innerHTML, color: cell.style.color, bgcolor: cell.style.backgroundColor};
        }

        writeBufferAt(x, y, value) {
            let color = value.color || 15;
            let bgcolor = value.bgcolor || 0;

            this._commander.writeBuffer(x, y, value);

            //this._commander.getBuffer(x, y).innerHTML = value.value || '';
            //this._commander.getBuffer(x, y).style.color = color;
            //this._commander.getBuffer(x, y).style.backgroundColor = bgcolor;
        }

        addEventListener(eventType, action) {
            this._commander.addEventListener(eventType, action);        
        }

        removeEventListener(eventType, action) {
            this._commander.removeEventListener(eventType, action);
        }
    }
</script>
